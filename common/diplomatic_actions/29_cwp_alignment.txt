diplomatic_alignment = {
	requires_approval = no
	should_notify_third_parties = no
	potential = {
		NOT = {
			is_country_type = decentralized
			country_rank >= rank_value:superpower
			is_subject = yes
			is_revolutionary = yes
		}
		scope:target_country = {
			or = {
				country_rank >= rank_value:superpower
				has_variable = western_bloc_leader
				has_variable = eastern_bloc_leader
			}
		}
	}
	possible = {
		custom_tooltip = {
			text = DIPLO_ACTION_RELATIONS_POOR_OR_LESS_NOT
			scope:target_country.relations:root >= relations_threshold:neutral
		}
	}
	pact = {
		cost = 50
		is_two_sided_pact = no
		is_trade_agreement = yes
		show_in_outliner = yes
		relations_progress_per_day = 1		# At 100, +1 relations
		relations_improvement_max = 50
		requirement_to_maintain = {
			trigger_if = {
				limit = {
					scope:target_country = {
						has_variable = eastern_bloc_leader
					}
				}
				not = {
					has_variable = western_bloc_member
				}
			}
			trigger_if = {
				limit = {
					scope:target_country = {
						has_variable = western_bloc_leader
					}
				}
				not = {
					has_variable = eastern_bloc_member
				}
			}
		}
		requirement_to_maintain = {
			trigger = {
				NOT = {
					has_war_with = scope:target_country
				}
			}
		}
		requirement_to_maintain = {
			trigger = {
				custom_tooltip = {
					text = DIPLO_ACTION_RELATIONS_COLD_OR_LESS_NOT
					scope:target_country.relations:root > relations_threshold:cold
				}
			}
			show_about_to_break_warning = {
				scope:target_country.relations:root < -47				# this is: cold + 3
				scope:target_country.relations_change_rate:root < 0
			}
		}
		requirement_to_maintain = {
			trigger_if = {
				limit = {
					is_subject = yes
				}
				OR = {
					AND = {
						root.overlord = {
							OR = {
								has_variable = western_bloc_leader
								has_variable = western_bloc_member
							}
						}
						scope:target_country = {
							has_variable = western_bloc_leader
						}
					}
					AND = {
						root.overlord = {
							OR = {
								has_variable = eastern_bloc_leader
								has_variable = eastern_bloc_member
							}
						}
						scope:target_country = {
							has_variable = eastern_bloc_leader
						}
					}
				}
			}
		}
		manual_break_effect = {
			change_relations = {
				country = scope:target_country
				value = -20
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = western_bloc_leader
					}
				}
				remove_variable = western_bloc_member
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = eastern_bloc_leader
					}
				}
				remove_variable = eastern_bloc_member
			}
		}
		auto_break_effect = {
			if = {
				limit = {
					scope:target_country = {
						has_variable = western_bloc_leader
					}
				}
				remove_variable = western_bloc_member
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = eastern_bloc_leader
					}
				}
				remove_variable = eastern_bloc_member
			}
		}
	}
	accept_effect = {
		if = {
			limit = {
				scope:target_country = {
					has_variable = western_bloc_leader
				}
			}
			set_variable = western_bloc_member
		}
		if = {
			limit = {
				scope:target_country = {
					has_variable = eastern_bloc_leader
				}
			}
			set_variable = eastern_bloc_member
		}
	}
	ai = {
		max_influence_spending_fraction = 1.25
		propose_score = {
			value = 0
			if = {
				limit = {
					scope:target_country = {
						has_variable = western_bloc_leader
					}
					AND = {
						has_radical_leftist_economy = no
						has_radical_leftist_government = no
					}
				}
				add = 60
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = eastern_bloc_leader
					}
					AND = {
						has_radical_leftist_economy = yes
						has_radical_leftist_government = yes
					}
				}
				add = 60
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = eastern_bloc_leader
					}
					OR = {
						is_authoritarian = yes
					}
				}
				add = 20
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = western_bloc_leader
					}
					OR = {
						has_voting_rights = yes
					}
				}
				add = 20
			}
			if = {
				limit = {
					has_attitude = {
						who = scope:target_country
						attitude = protective
					}
				}
				add = 5
			}
			if = {
				limit = {
					c:STK ?= this
					exists = c:USA
					scope:target_country = c:USA
				}
				add = 100
			}
			if = {
				limit = {
					c:NRK ?= this
					exists = c:RUS
					scope:target_country = c:RUS
				}
				add = 100
			}
		}
		propose_break_score = {
			value = -30
			if = {
				limit = {
					scope:target_country = {
						has_variable = western_bloc_leader
					}
					AND = {
						has_radical_leftist_economy = yes
						has_radical_leftist_government = yes
					}
				}
				add = 50
			}
			if = {
				limit = {
					scope:target_country = {
						has_variable = eastern_bloc_leader
					}
					AND = {
						has_radical_leftist_economy = no
						has_radical_leftist_government = no
					}
				}
				add = 50
			}
		}
		will_propose = {
			OR = {
				AND = {
					has_attitude = {
						who = scope:target_country
						attitude = cooperative
					}
					country_rank <= scope:target_country.country_rank
				}
				has_attitude = {
					who = scope:target_country
					attitude = conciliatory
				}
				has_attitude = {
					who = scope:target_country
					attitude = genial
				}
				has_attitude = {
					who = scope:target_country
					attitude = protective
				}
			}
		}
		will_break = {
			OR = {
				scope:target_country = {
					country_rank < rank_value:great_power
				}
			}
		}
	}
}
